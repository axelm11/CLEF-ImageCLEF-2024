# UACH-Vision-Lab's Participation in ImageCLEFmedical Lab at CLEF 2024

Automatic Medical Concept Detection on Images: Dividing the Task into Smaller Ones

![Project Diagram](https://github.com/axelm11/CLEF-ImageCLEF-2024/blob/master/resources/diagram.jpeg)

In this repository, you will find the participation of the UACH-Vision-Lab team in the ImageCLEFmedical Lab at CLEF 2024 competition.

The repository consists of three folders:
- **Code**: Contains the Python scripts used in this competition.
- **Train-csv**: Contains the CSV files used to store the CUIs of the training images.
- **Valid-csv**: Contains the CSV files used to store the CUIs of the validation images.

To work with these codes, you will need the database provided by the competition.

### Code Folder
In the **Code** folder, there are five Python files:

1. **final_training_efficientnetb0_model.py**:
   - This script is used to train the complete dataset. 
   - Adjust the paths to the `train` and `valid` data folders (provided by the competition).
   - Also, adjust the paths to the `train_concepts` and `valid_concepts` CSV files (found in the `Train-csv` and `Valid-csv` folders respectively).
   - You can rename the file that saves the results as desired and modify all the paths where weights and data are stored.
   - Ensure the data paths in the code are consistent with how the files are organized.
   - This will produce results for the complete dataset (with 1945 classes).

2. **create_filtered_csv.py**:
   - This script creates a CSV file containing only the desired CUIs.
   - This is useful for splitting the dataset into smaller, more manageable groups for training.
   - The complete `train` and `valid` datasets, along with their respective CSV files, are required.

3. **organize_filtered_images_into_folders.py**:
   - This script organizes images into folders based on the filtered CSV files created by the previous script.
   - This will give you a filtered dataset ready for further processing.
   - Ensure to provide correct paths to the complete datasets (`train` and `valid`), their CSV files, the filtered CSVs, and the folder where you want to save the images.

4. **train_on_filtered_data_model.py**:
   - This script is used to train the model on the filtered datasets generated by the previous scripts.
   - Replace the paths with those of the relevant files and folders you wish to use.

5. **model_evaluator.py**:
   - This script evaluates the results of the weights obtained during training.
   - Provide all the paths for weights, CSV files, and image folders in their respective fields.
